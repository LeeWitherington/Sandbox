// (c) 2009 Microsoft Corporation, All Rights Reserved
// Use of this software is subject to the following license terms: 
// http://go.microsoft.com/fwlink/?LinkId=163454
Type._registerScript("MicrosoftAjaxTemplates.js",["MicrosoftAjaxComponentModel.js","MicrosoftAjaxSerialization.js"]);Type.registerNamespace("Sys.Net");Sys.Net.WebRequestEventArgs=function(c,d,b){var a=this;a._executor=c;a._error=d||null;a._result=typeof b==="undefined"?null:b;Sys.Net.WebRequestEventArgs.initializeBase(a)};Sys.Net.WebRequestEventArgs.prototype={get_error:function(){return this._error||null},get_executor:function(){return this._executor},get_result:function(){return this._result}};Sys.Net.WebRequestEventArgs.registerClass("Sys.Net.WebRequestEventArgs",Sys.EventArgs);Type.registerNamespace("Sys.Data");Sys.Data.DataEventArgs=function(a){this._data=a;Sys.Data.DataEventArgs.initializeBase(this)};Sys.Data.DataEventArgs.prototype={get_data:function(){var a=this._data;return typeof a==="undefined"?null:a},set_data:function(a){this._data=a},get_itemPlaceholder:function(){return this._placeholder||null},set_itemPlaceholder:function(a){this._placeholder=a},get_itemTemplate:function(){return this._itemTemplate||null},set_itemTemplate:function(a){this._itemTemplate=a}};Sys.Data.DataEventArgs.registerClass("Sys.Data.DataEventArgs",Sys.CancelEventArgs);if(!Sys.Data.IDataProvider){Sys.Data.IDataProvider=function(){};Sys.Data.IDataProvider.prototype={fetchData:function(){}};Sys.Data.IDataProvider.registerInterface("Sys.Data.IDataProvider")}if(!Sys.Data.MergeOption){Sys.Data.MergeOption=function(){throw Error.notImplemented()};Sys.Data.MergeOption.prototype={appendOnly:0,overwriteChanges:1};Sys.Data.MergeOption.registerEnum("Sys.Data.MergeOption")}Type.registerNamespace("Sys.UI");Sys.UI.DomElement._oldGetElementById=Sys.UI.DomElement.getElementById;Sys.UI.DomElement.getElementById=function(c,h){var a=Sys.UI.DomElement._oldGetElementById(c,h);if(!a&&!h&&Sys.UI.Template._contexts.length){var f=Sys.UI.Template._contexts;for(var d=0,i=f.length;d<i;d++){var g=f[d];for(var e=0,j=g.length;e<j;e++){var b=g[e];if(b.nodeType===1){if(b.id===c)return b;a=Sys.UI.DomElement._oldGetElementById(c,b);if(a)return a}}}}return a};if($get===Sys.UI.DomElement._oldGetElementById)$get=Sys.UI.DomElement.getElementById;Sys.Application.registerMarkupExtension=function(b,c,a){if(!this._extensions)this._extensions={};a=typeof a==="undefined"||a===true;this._extensions[b]={expression:a,extension:c}};Sys.Application._getMarkupExtension=function(b){var a=this._extensions?this._extensions[b]:null;if(!a)throw Error.invalidOperation(String.format(Sys.UI.TemplatesRes.cannotFindMarkupExtension,b));return a};Sys.Application._caseIndex={};Sys.Application._prototypeIndex={};Sys.Application.activateElement=function(c,b,a){a=a!==false;return Sys.Application.activateElements([c],b||null,a)};Sys.Application.activateElements=function(e,d,b){var a=this._context||new Sys.UI.TemplateContext,f=Sys.Browser.agent===Sys.Browser.InternetExplorer;a._global=true;a.dataItem=typeof d==="undefined"?null:d;a.components=a.components||[];b=b!==false;for(var c=0,h=e.length;c<h;c++){var g=e[c];Sys.Application._activateElement(g,a,f,b)}a.initializeComponents();a._onInstantiated(null,true);this._context=a;return a};Sys.Application._findType=function(b,g,f){var h,c,a,e="xmlns:"+g;function d(){var c;try{c=f?b[e]:b.getAttribute(e)}catch(d){}if(c&&c.substr(0,11)==="javascript:"){c=c.substr(11);a=null;a=Type.parse(c);if(a&&a.__class)return;else a=c}}for(;b;b=b.parentNode){d();if(c)throw Error.invalidOperation(c);if(a)return a}b=document.body;d();if(c)throw Error.invalidOperation(c);return a};Sys.Application._activateElement=function(r,h,p,u){var I="undefined",H=":sys-key",s=true,d=null;if(u)u=!Sys.UI.Template._isTemplate(r);var E=-1,G=u?p?r.all:r.getElementsByTagName("*"):[],T=/(^| )sys\-template($| )/;expandosAreLast=p&&Sys.Browser.version<=7,element=r;do{if(element.nodeType!==1)continue;var W,g,Q,w=d,c=d,l=d,n=d,J=false,v=d,A=element.attributes,B=A.length-1,o=d;if(B>=0&&(!expandosAreLast||A[B].expando)&&!element.__msajaxactivated){for(g=B;g>=0;g--){var j=A[g];if(expandosAreLast&&!j.expando)break;if(!j.specified||j.nodeName.indexOf(":")<0)continue;J=s;v=j.nodeName;var a=j.nodeValue;switch(v){case "sys:attach":w=a.split(",");break;case "sys:key":h.keys[a]=element;break;case "sys:command":var U=Sys.Application._getPropertyValue(d,d,d,a,h,d,s),S=Sys.Application._getCommandAttr(element,"sys:commandargument",p),R=Sys.Application._getCommandAttr(element,"sys:commandtarget",p);Sys.UI.DomEvent.addHandler(element,"click",Sys.UI.Template._getCommandHandler(h,U,S,R));break;default:o=o||[];o.push(j)}}if(J){element.__msajaxactivated=s;if(w){l={};for(var F=0,X=w.length;F<X;F++){var m=w[F].trim();if(l[m])continue;var i=Sys.Application._findType(element,m,p),D=d,z=0,y=0,K=0,V=typeof i!=="string",q=d,k=d;try{q=p?element[m+H]:element.getAttribute(m+H)}catch(W){}if(V){z=i.inheritsFrom(Sys.Component);y=z&&(i.inheritsFrom(Sys.UI.Behavior)||i.inheritsFrom(Sys.UI.Control));K=i.implementsInterface(Sys.UI.ITemplateContextConsumer);k=y?new i(element):new i;if(z)k.beginUpdate();if(!y)Sys.Application._registerComponent(element,k);if(q){h.keys[q]=k;k.__tc=[d,d,q]}if(K)k.set_templateContext(h);c={instance:k,isClass:s,typeName:m,type:i}}else{D={};k=Type.parse(i);if(q)D["sys-key"]=q;c={instance:k,props:D,typeName:m,type:i};if(!n)n=[c];else n[n.length]=c}l[m]=c}}if(o)for(g=o.length-1;g>=0;g--){j=o[g];v=j.nodeName;a=j.nodeValue;var M=/select/i.test(element.tagName),f=Sys.Application._splitAttribute(v,M,l),C=f.type,Y=f.ns,b=f.name;if(C<0)continue;if(C===4){c=f.index;var x=c.instance;a=Sys.Application._getPropertyValue(f,x,b,a,h);if(typeof a===I)continue;if(c.isClass)switch(f.map.type){case 1:f.map.setter.call(x,a);break;case 2:f.map.setter.call(x,typeof a==="function"?a:new Function("sender","args",a));break;default:x[b]=a}else c.props[b]=a}else if(C<=2){if(f.textNode||b==="innerHTML"){Sys.Application._clearContent(element);if(f.textNode)element.appendChild(element=document.createTextNode(""))}a=Sys.Application._getPropertyValue(f,element,b,a,h);if(typeof a===I)continue;switch(f.type){case 0:if(/^on/i.test(b)){element[b]=document.attachEvent?new Function(a):new Function("event",a);break}if(M&&b==="value"){element.value=a;break}var L=Sys.UI.Template._booleanAttributes,N=element.tagName.toLowerCase(),O=b==="disabled"||L[N]&&L[N][b];if(O){if(b==="selected")element.selected=a;if(!a){element.removeAttribute(b);break}else if(b==="checked"){element.setAttribute(b,b);break}}var P=document.createAttribute(b);P.nodeValue=O?b:a;element.setAttributeNode(P);break;case 1:Sys.Observer.setValue(element,b,a);break;case 2:a?Sys.UI.DomElement.addCssClass(element,b):Sys.UI.DomElement.removeCssClass(element,b)}}}if(n)for(g=0,Q=n.length;g<Q;g++){c=n[g];h._registerIf(c.instance(element,c.props,h))}if(l)for(c in l)if(l.hasOwnProperty(c)){c=l[c];if(c&&c.isClass)h._registerComponent(c.instance)}}}if(u){var t=element.className;if(t&&t.length>=12&&(t==="sys-template"||T.test(t))){var e=element.nextSibling;while(e&&e.nodeType!==1)e=e.nextSibling;while(!e){element=element.parentNode;if(element===r)break;e=element.nextSibling;while(e&&e.nodeType!==1)e=e.nextSibling}if(!e||e.nodeType!==1)break;do{element=G[E+1];if(element===e)break;E++}while(element)}}}while(!!(element=G[++E]))};Sys.Application._clearContent=function(a){var b;Sys.Application.disposeElement(a,true);try{a.innerHTML=""}catch(b){while(a.firstChild)a.removeChild(a.firstChild)}};Sys.Application._getCommandAttr=function(c,d,e){var a=null,f,b=a;try{b=e?c[d]:c.getAttribute(d);b=b?Sys.Application._getPropertyValue(a,a,a,b,templateContext,a,true):a}catch(f){}return b};Sys.Application._directAttributes={style:"style.cssText","class":"className",cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",contenteditable:"contentEditable",valign:"vAlign"};Sys.Application._splitAttribute=function(m,o,j){var d=null,f=m.split(":"),c=f.length>1?f[0]:d,a=f[c?1:0],b=-1,k,h,e,g=c==="sys",i=a.toLowerCase(),n=!c;if(!c||g){var l=Sys.Application._directAttributes[i];if(l){b=1;a=l}else if(o){if(i==="selectedindex"){a="selectedIndex";b=1}else if(a==="value")b=1;else if(g){b=0;c=d}}else if(g)if(a==="command"||a==="commandargument"||a==="commandtarget")b=5;else if(a.indexOf("style-")===0){a="style."+Sys.Application._translateStyleName(a.substr(6));b=1}else if(a.indexOf("class-")===0){a=a.substr(6);b=2}else if(a==="innerhtml"){b=1;a="innerHTML"}else if(a==="innertext"){b=1;k=true;a="nodeValue"}else{c=d;b=0}}else if(j){e=j[c];if(e){b=4;if(e.isClass)if(a==="sys-key")b=-2;else{h=Sys.Application._translateName(a,e.type);a=h.name}}else{a=c+":"+a;c=d;b=-1}}else{a=c+":"+a;c=d;b=-1}return {ns:c,name:a,type:b,map:h,index:e,textNode:k,isNative:n}};Sys.Application._translateStyleName=function(b){if(b.indexOf("-")===-1)return b;var a=b.toLowerCase().split("-"),d=a[0];for(var c=1,f=a.length;c<f;c++){var e=a[c];d+=e.substr(0,1).toUpperCase()+e.substr(1)}return d};Sys.Application._getExtensionCode=function(b,l,k){b=b.trim();var e,a,j={},g=b.indexOf(" ");if(g!==-1){e=b.substr(0,g);a=b.substr(g+1);if(a){a=a.replace(/\\,/g,"\0").split(",");for(var i=0,m=a.length;i<m;i++){var d=a[i].replace(/\u0000/g,","),f=d.indexOf("="),c,h;if(f!==-1){h=d.substr(0,f).trim();c=d.substr(f+1).trim();if(l)c=this._getPropertyValue(null,null,null,c,k,true)}else{h="$default";c=d.trim()}j[h]=c}}}else e=b;return {instance:Sys.Application._getMarkupExtension(e),name:e,properties:j}};Sys.Application._getPropertyValue=function(g,h,i,a,b,f,e){var c=a;if(a.startsWith("{{")&&a.endsWith("}}"))c=this._evaluateExpression(a.slice(2,-2),b);else if(!e&&!f&&a.startsWith("{")&&a.endsWith("}")){var d=this._getExtensionCode(a.slice(1,-1),true,b);c=d.instance.extension(h,(g.type===2?"class:":"")+i,b,d.properties)}return c};Sys.Application._tryName=function(a,f){var c=f.prototype,b="set_"+a,d=c[b];if(d)return {name:a,setterName:b,setter:d,type:1};if(a.startsWith("on")){b="add_"+a.substr(2);var e=c[b];if(e)return {name:a,setterName:b,setter:e,type:2}}if(typeof c[a]!=="undefined")return {name:a};return null};Sys.Application._translateName=function(b,c){var a,d=Sys.Application._prototypeIndex[c.__typeName];if(d){a=d[b];if(a)return a}else d={};c.resolveInheritance();a=Sys.Application._tryName(b,c);if(!a){var e=Sys.Application._mapToPrototype(b,c);if(e&&e!==b)a=Sys.Application._tryName(e,c);if(!a)a={name:b}}d[b]=a;return a};Sys.Application._mapToPrototype=function(d,e){var c,b=Sys.Application._caseIndex[e.__typeName];if(!b){b={};e.resolveInheritance();for(var a in e.prototype){if(a.startsWith("get_")||a.startsWith("set_")||a.startsWith("add_"))a=a.substr(4);else if(a.startsWith("remove_"))a=a.substr(7);b[a.toLowerCase()]=a}Sys.Application._caseIndex[e.__typeName]=b}d=d.toLowerCase();if(d.startsWith("on")){c=b[d.substr(2)];if(c)c="on"+c;else c=b[d]}else c=b[d];return c};Sys.Application._doEval=function(__expression,$context){with($context.keys)with($context.dataItem||{})return eval("("+__expression+")")};Sys.Application._evaluateExpression=function(b,a){return Sys.Application._doEval.call(a.dataItem,b,a)};Sys.Application._registerComponent=function(b,c){var a=b._components;if(!a)b._components=a=[];a[a.length]=c};Sys.Application._activateOnPartial=function(a,b){this._doUpdatePanel(a,b);Sys.Application.activateElement(a)};Sys.Application._raiseInit=function(){var a=this;a.beginCreateComponents();var c=a.get_events().getHandler("init");if(c)c(a,Sys.EventArgs.Empty);Sys.Application.activateElement(document.documentElement);if(Sys.WebForms&&Sys.WebForms.PageRequestManager){var b=Sys.WebForms.PageRequestManager.getInstance();b._doUpdatePanel=b._updatePanel;b._updatePanel=Sys.Application._activateOnPartial}a.endCreateComponents()};Sys.UI.Template=function(a){this._element=a;this._instantiateIn=null;this._instanceId=0};Sys.UI.Template.prototype={get_element:function(){return this._element},dispose:function(){this._element=null;this._instantiateIn=null},_appendTextNode:function(b,a,c){b.push(a+"document.createTextNode("+Sys.Serialization.JavaScriptSerializer.serialize(c)+"));\n")},_appendAttributeSetter:function(b,q,d,a,g,m){var j="  $component.",i=");\n",k="  $component = $element;\n  ",e=";\n",n="  $component = $element;\n  $element.",l=d.ns,c=d.name,p=!l&&Sys.UI.Template._isRestricted(c);if(p)a="Sys.UI.Template._checkAttribute('"+c+"', "+a+")";switch(d.type){case 1:if(g)if(d.textNode)b.push(Sys.UI.Template._createTextNode.replace("%1",a).replace("%2",""));else b.push(n+c+" = "+a+";\n;");else if(d.textNode)b.push(Sys.UI.Template._createTextNode.replace("%1","''").replace("%2",a+e));else b.push(k+a+e);if(d.textNode||c==="innerHTML")return true;break;case 2:if(g){c=Sys.Serialization.JavaScriptSerializer.serialize(c);b.push("  $component = $element;\n    ("+a+") ? Sys.UI.DomElement.addCssClass($element, "+c+") : Sys.UI.DomElement.removeCssClass($element, "+c+i)}else b.push(k+a+e);break;case 3:b.push("  $context.keys["+a+"] = $component;\n");break;case 4:var h=q[l];if(h.isClass){b.push("  $component = __componentIndex['"+l+"'];\n");if(g){var f=d.map;if(f.type===1)b.push(j+f.setterName+"("+a+i);else if(f.type===2){b.push("  __f = "+a+e);b.push(j+f.setterName+'(typeof(__f) === "function" ? __f : new Function("sender", "args", __f));\n')}else b.push(j+f.name+" = "+a+e)}else b.push("  "+a+e)}else{var o=Sys.Serialization.JavaScriptSerializer.serialize(d.name)+": "+a;if(!h.props)h.props=o;else h.props+=", "+o}break;case 5:this["_"+c]=a;break;default:if(g)if(/^on/i.test(c))b.push(n+c+" = new Function("+(document.attachEvent?"":"'event', ")+a+i);else if(m)b.push("  $component = $element;\n  if ("+a+") {\n    __e = document.createAttribute('"+c+"');\n    __e.nodeValue = \""+m+'";\n    $element.setAttributeNode(__e);\n  }\n');else b.push("  $component = $element;\n  __e = document.createAttribute('"+c+"');\n  __e.nodeValue = "+a+";\n  $element.setAttributeNode(__e);\n");else b.push(k+a+e)}return false},_processAttribute:function(e,d,b,a,c){a=this._getAttributeExpression(b,a);if(a)return this._appendAttributeSetter(e,d,b,a.code,a.isExpression,c);return false},_getAttributeExpression:function(b,a,k){var j=typeof a;if(j==="undefined")return null;if(a===null)return {isExpression:true,code:"null"};if(!b.isNative&&j==="string")if(a.startsWith("{{")&&a.endsWith("}}"))return {isExpression:true,code:a.slice(2,-2).trim()};else if(a.startsWith("{")&&a.endsWith("}")){var f=Sys.Serialization.JavaScriptSerializer,e=Sys.Application._getExtensionCode(a.slice(1,-1)),g=e.properties,c="";for(var h in g){var d=this._getAttributeExpression(b,g[h]);if(d&&d.isExpression){var i=f.serialize(h)+":"+d.code;if(c)c+=","+i;else c=i}}return {isExpression:e.instance.expression,code:"Sys.Application._getMarkupExtension("+f.serialize(e.name)+").extension($component, "+f.serialize((b.type===2?"class:":"")+b.name)+", $context, {"+c+"})"}}return {isExpression:true,code:k?a:Sys.Serialization.JavaScriptSerializer.serialize(a)}},_processBooleanAttribute:function(e,h,g,b){var d=true,a,f,c=e.getAttributeNode("sys:"+b);if(!c){f=d;c=e.getAttributeNode(b);if(c&&(c.specified||c.nodeValue===d))a=d;else if(e.getAttribute(b)===b)a=d;else return}else{a=c.nodeValue;if(a==="true")a=d;else if(a==="false")return}this._processAttribute(h,g,{name:b,isNative:f},a,b)},_processBooleanAttributes:function(d,e,c,b){var h,i,g;for(var a=0,f=b.length;a<f;a++)this._processBooleanAttribute(d,e,c,b[a])},_processCodeBlock:function(b,c,d){var a=this._getExplicitAttribute(null,null,c,b);if(a){a=this._getAttributeExpression({name:b},a,true).code;d.push(b==="sys:if"?"  if ("+a+") {\n":"  "+a+"\n")}return !!a},_getExplicitAttribute:function(h,e,c,d,b,f){var a;try{a=c.getAttributeNode(d)}catch(i){return null}if(!a||!a.specified)return null;if(b){var g=d==="style"?c.style.cssText:a.nodeValue;this._processAttribute(h,e,{name:b,type:1,isNative:f},g)}return a.nodeValue},_buildTemplateCode:function(D,H,a,U){var F="name",r=true,E="type",l=null,P="document.createTextNode(",w="));\n",b=this,B,e,X,p,f,u,N=Sys.UI.Template._expressionRegExp,g="  "+(U?"__p[__d-1].appendChild(":"__topElements.push("),db=Sys.Browser.agent===Sys.Browser.InternetExplorer;a.push("  __d++;\n");for(B=0,X=H.childNodes.length;B<X;B++){var c=H.childNodes[B],h=c.nodeValue;if(c.nodeType===8)a.push(g+"document.createComment("+Sys.Serialization.JavaScriptSerializer.serialize(h)+w);else if(c.nodeType===3){var t=h.trim();if(t.startsWith("{")&&t.endsWith("}")&&(!t.startsWith("{{")||!t.endsWith("}}"))){var G,C;if(H.tagName.toLowerCase()==="textarea"){G="value";C="$component=$element;\n"}else{G="nodeValue";C=g+'$element=$component=document.createTextNode(""));\n'}var L=b._getAttributeExpression({name:G},t);if(L.isExpression)a.push(g+P+L.code+w);else a.push(C+"  "+L.code+";\n")}else{var o=N.exec(h),y=0;while(o){var Q=h.substring(y,o.index);if(Q)b._appendTextNode(a,g,Q);a.push(g+P+o[1]+w);y=o.index+o[0].length;o=N.exec(h)}if(y<h.length)b._appendTextNode(a,g,h.substr(y))}}else{var R=c.attributes,n=l,k=l,d={},z=c.tagName.toLowerCase(),q,eb=U+1;if(z==="script")continue;var Y=b._processCodeBlock("sys:if",c,a);b._processCodeBlock("sys:codebefore",c,a);u=z==="input";if(u){var bb=b._getAttributeExpression({name:E,isNative:r},c.getAttribute(E))||b._getAttributeExpression({name:E},c.getAttribute("sys:type")),Z=b._getAttributeExpression({name:F,isNative:r},c.getAttribute(F))||b._getAttributeExpression({name:F},c.getAttribute("sys:name"));a.push("  $element=__p[__d]=Sys.UI.Template._createInput("+bb.code+", "+Z.code+");\n");q=Sys.UI.Template._inputBooleanAttributes;b._processBooleanAttributes(c,a,d,q[" list"])}else a.push("  $element=__p[__d]=document.createElement('"+c.nodeName+"');\n");n=b._getExplicitAttribute(a,d,c,"sys:attach");if(n){n=n.split(",");a.push("  __componentIndex = {}\n");for(e=0,p=n.length;e<p;e++){f=n[e].trim();if(d[f])continue;var i=Sys.Application._findType(c,f,db),x,M,S,I=typeof i!=="string";if(I){x=i.inheritsFrom(Sys.Component);M=x&&(i.inheritsFrom(Sys.UI.Behavior)||i.inheritsFrom(Sys.UI.Control));S=i.implementsInterface(Sys.UI.ITemplateContextConsumer)}d[f]={type:i,isClass:I,isComponent:x};if(I){a.push("  __componentIndex['"+f+"'] = $component = new "+i.getName());if(M)a.push("($element);\n");else a.push("();\n  Sys.Application._registerComponent($element, $component);\n");k=b._getExplicitAttribute(a,d,c,f+":sys-key");if(k)b._processAttribute(a,d,{ns:f,name:"sys-key",type:3},k);if(x)a.push("  $component.beginUpdate();\n");if(S)a.push("  $component.set_templateContext($context);\n")}}}k=b._getExplicitAttribute(a,d,c,"sys:key");if(k)a.push("  $context.keys["+Sys.Serialization.JavaScriptSerializer.serialize(k)+"] = $element;\n");b._getExplicitAttribute(a,d,c,"sys:id","id");b._getExplicitAttribute(a,d,c,"style","style.cssText",r);b._getExplicitAttribute(a,d,c,"class","className",r);if(!u){q=Sys.UI.Template._booleanAttributes[z]||Sys.UI.Template._commonBooleanAttributes;b._processBooleanAttributes(c,a,d,q[" list"])}var T=z==="select",j=l,cb=Sys.Application._splitAttribute,O=false;for(e=0,p=R.length;e<p;e++){var m=R[e],A=m.nodeName,s=A.toLowerCase();if(!m.specified&&(!u||s!=="value"))continue;if(s==="class"||s==="style")continue;if(q[s])continue;if(u&&Sys._indexOf(Sys.UI.Template._inputRequiredAttributes,s)!==-1)continue;var v=cb(A,T,d),W=v.ns,V=m.nodeValue,J=v.type;A=v.name;if(J===-2)continue;if(J===1){if(T&&(!W||W==="sys")){j=j||[];j.push([v,V]);continue}}else if(J===0)if(Sys._indexOf(Sys.UI.Template._sysAttributes,A)!==-1)continue;if(b._processAttribute(a,d,v,V))O=r}if(b._command){a.push(" Sys.UI.DomEvent.addHandler($element, 'click', Sys.UI.Template._getCommandHandler($context, "+b._command+", "+(b._commandargument||"null")+", "+(b._commandtarget||"null")+w);b._command=l}b._commandargument=l;b._commandtarget=l;a.push(g+"$element);\n");for(f in d){var K=d[f];if(K.isClass)a.push("  $context._registerComponent(__componentIndex['"+f+"']);\n");else{a.push("  $context._registerIf(");a.push(K.type);a.push("($element, ");a.push("{"+(K.props||"")+"}, $context));\n")}}if(Sys.UI.Template._isTemplate(c)){var ab=new Sys.UI.Template(c);ab.recompile();D.push(c._msajaxtemplate);a.push("  $element._msajaxtemplate = this.get_element()._msajaxtemplate[1]["+(D.length-1)+"];\n")}else if(!O){b._buildTemplateCode(D,c,a,eb);a.push("  $element=__p[__d];\n")}if(j)for(e=0,p=j.length;e<p;e++){m=j[e];b._processAttribute(a,d,m[0],m[1])}b._processCodeBlock("sys:codeafter",c,a);if(Y)a.push("  }\n")}}a.push("  --__d;\n")},_ensureCompiled:function(){var a=this;if(!a._instantiateIn){var b=a.get_element();if(b._msajaxtemplate)a._instantiateIn=b._msajaxtemplate[0];else a.recompile()}},recompile:function(){var c=this.get_element(),a=[" $index = (typeof($index) === 'number' ? $index : __instanceId);\n var $component, __componentIndex, __e, __f, __topElements = [], __d = 0, __p = [__containerElement], $element = __containerElement, $context = new Sys.UI.TemplateContext(), $id = function(prefix) { return $context.getInstanceId(prefix); };\n $context.data = (typeof(__data) === 'undefined' ? null : __data);\n $context.components = [];\n $context.nodes = __topElements;\n $context.dataItem = $dataItem;\n $context.index = $index;\n $context.parentContext = __parentContext;\n $context.containerElement = __containerElement;\n $context.template = this;\n Sys.UI.Template._contexts.push(__topElements);\n with($context.keys) { with($dataItem || {}) {\n"],b=[];this._buildTemplateCode(b,c,a,0);a.push("} }\n $context._onInstantiated(__referenceNode);\n return $context;");a=a.join("");c._msajaxtemplate=[this._instantiateIn=new Function("__containerElement","__data","$dataItem","$index","__referenceNode","__parentContext","__instanceId",a),b]},instantiateIn:function(b,f,e,d,a,c){b=Sys.UI.DomElement.resolveElement(b);a=a?Sys.UI.DomElement.resolveElement(a):null;this._ensureCompiled();return this._instantiateIn(b,f,e,d,a,c,this._instanceId++)}};Sys.UI.Template._isRestricted=function(b){var a=Sys.UI.Template._getRestrictedIndex();return a.attributes[b.toLowerCase()]};Sys.UI.Template._checkAttribute=function(e,a){if(!a)return a;var c=a,b=Sys.UI.Template._getRestrictedIndex();if(b.attributes[e.toLowerCase()]){if(typeof a!=="string")a=a.toString();var d=Sys.UI.Template._protocolRegExp.exec(a.toLowerCase());if(d)if(!b.protocols[d[1]])c=""}return c};Sys.UI.Template._getCommandHandler=function(d,c,b,a){return function(){var e=this;if(a){var f=typeof a==="string"?d.getObjectByKey(a)||Sys.Application.findComponent(a):a;Sys.UI.DomElement._raiseBubbleEventFromControl(f,e,new Sys.CommandEventArgs(c,b,e))}else Sys.UI.DomElement.raiseBubbleEvent(e,new Sys.CommandEventArgs(c,b,e))}};Sys.UI.Template._getIdFunction=function(a){return function(b){return b+a}};Sys.UI.Template._createInput=function(c,b){var a,e=Sys.UI.Template._dynamicInputs;if(e===true){a=document.createElement("input");if(c)a.type=c;if(b)a.name=b}else{var d="<input ";if(c)d+="type='"+c+"' ";if(b)d+="name='"+b+"' ";d+="/>";try{a=document.createElement(d)}catch(f){Sys.UI.Template._dynamicInputs=true;return Sys.UI.Template._createInput(c,b)}if(e!==false)if(a.tagName.toLowerCase()==="input")Sys.UI.Template._dynamicInputs=false;else{Sys.UI.Template._dynamicInputs=true;return Sys.UI.Template._createInput(c,b)}}return a};Sys.UI.Template._isTemplate=function(b){var a=b.className;return a&&(a==="sys-template"||/(^| )sys\-template($| )/.test(a))};Sys.UI.Template._contexts=[];Sys.UI.Template._inputRequiredAttributes=["type","name"];Sys.UI.Template._commonBooleanAttributes={disabled:true," list":["disabled"]};Sys.UI.Template._inputBooleanAttributes={disabled:true,checked:true,readonly:true," list":["disabled","checked","readonly"]};Sys.UI.Template._booleanAttributes={input:Sys.UI.Template._inputBooleanAttributes,select:{disabled:true,multiple:true," list":["disabled","multiple"]},option:{disabled:true,selected:true," list":["disabled","selected"]},img:{disabled:true,ismap:true," list":["disabled","ismap"]},textarea:{disabled:true,readonly:true," list":["disabled","readonly"]}};Sys.UI.Template._sysAttributes=["attach","id","key","disabled","checked","readonly","ismap","multiple","selected","if","codebefore","codeafter"];Sys.UI.Template._expressionRegExp=/\{\{\s*([\w\W]*?)\s*\}\}/g;Sys.UI.Template.allowedProtocols=["http","https"];Sys.UI.Template.restrictedAttributes=["src","href","codebase","cite","background","action","longdesc","profile","usemap","classid","data"];Sys.UI.Template._getRestrictedIndex=function(){var b,e,g,f,d=Sys.UI.Template.allowedProtocols||[],c=Sys.UI.Template.restrictedAttributes||[],a=Sys.UI.Template._restrictedIndex;if(!a||a.allowedProtocols!==d||a.restrictedAttributes!==c){a={allowedProtocols:d,restrictedAttributes:c};a.protocols=g={};for(b=0,e=d.length;b<e;b++)g[d[b]]=true;a.attributes=f={};for(b=0,e=c.length;b<e;b++)f[c[b]]=true;Sys.UI.Template._restrictedIndex=a}return a};Sys.UI.Template._protocolRegExp=/^\s*([a-zA-Z0-9\+\-\.]+)\:/;Sys.UI.Template._createTextNode="  $element.appendChild($component=$element=document.createTextNode(%1));\n  %2$component=$element=$element.parentNode;\n";Sys.UI.Template.registerClass("Sys.UI.Template",null,Sys.IDisposable);Sys._Application.prototype.get_templateContext=function(){return this._context||null};Sys._Application.prototype._baseDispose=Sys._Application.prototype.dispose;Sys._Application.prototype.dispose=function(){var a=this._context;if(a)a.dispose();this._context=null;this._baseDispose()};Sys._Application.prototype.removeComponent=function(c){var d=c.get_id();if(d)delete this._components[d];var b=this._context;if(b){var a=c.__tc;if(a&&a[0]===b._tcindex){delete b.components[a[1]];if(a[2])delete b.keys[a[2]]}}};Sys._Application.prototype._disposeElementInternal=function(a){var e="function",h,c,f=this._context;if(f){try{c=a.getAttribute("sys:key")}catch(h){}if(c)delete f.keys[c]}var g=a.dispose;if(g&&typeof g===e)a.dispose();else{var d=a.control;if(d&&typeof d.dispose===e)d.dispose()}var b=a._behaviors;if(b)this._disposeComponents(b);b=a._components;if(b){this._disposeComponents(b);a._components=null}};Sys.UI.TemplateContext=function(){this.keys={};this._tcindex=Sys.UI.TemplateContext._tcindex++};Sys.UI.TemplateContext.prototype={data:null,dataItem:null,index:0,parentContext:null,containerElement:null,components:null,nodes:null,keys:null,_lastIndex:-1,dispose:function(){var a=this,b=a.nodes;if(b)for(var c=0,e=b.length;c<e;c++){var d=b[c];if(d.nodeType===1)Sys.Application.disposeElement(d,false)}a.nodes=a.dataItem=a.components=a.getInstanceId=a.containerElement=a.parentContext=a.data=null;a.keys={}},getElementById:function(d){if(!this.nodes)return Sys.UI.DomElement.getElementById(d);var f=this.getInstanceId(d),c=this.nodes,a,b,e;for(b=0,e=c.length;b<e;b++){a=c[b];if(a.nodeType!==1)continue;if(a.id===f)return a;a=Sys.UI.DomElement.getElementById(f,a);if(a)return a}for(b=0,e=c.length;b<e;b++){a=c[b];if(a.nodeType!==1)continue;if(a.id===d)return a;a=Sys.UI.DomElement.getElementById(d,a);if(a)return a}return null},getInstanceId:function(c){var b=this.index,a=this.parentContext;while(a&&!a._global){b=a.index+"_"+b;a=a.parentContext}return c+b},getObjectByKey:function(c){var a=this;while(a){var b=a.keys[c];if(b)return b;a=a.parentContext}return null},initializeComponents:function(){var c=this.components;if(c){var b=c.length-1,d=this._lastIndex;this._lastIndex=b;for(;b>d;b--){var a=c[b];if(a&&Sys.Component.isInstanceOfType(a))if(a.get_isUpdating())a.endUpdate();else if(!a.get_isInitialized())a.initialize()}}},_onInstantiated:function(e,f){var b=this,a,c,d=b.nodes;if(b.__completedCallbacks){for(a=0,c=b.__completedCallbacks.length;a<c;a++)b.__completedCallbacks[a]();b.__completedCallbacks=null}if(!f){for(a=0,c=d.length;a<c;a++)b.containerElement.insertBefore(d[a],e);Sys.UI.Template._contexts.pop()}},_registerComponent:function(a){var d=this.components,c=a.__tc;if(!c)a.__tc=c=[];c[0]=this._tcindex;c[1]=d.length;d.push(a);if(Sys.Component.isInstanceOfType(a)){var b=Sys.Application;if(a.get_id())b.addComponent(a);if(b.get_isCreatingComponents())b._createdComponents[b._createdComponents.length]=a}},_registerIf:function(a){if(a instanceof Array)for(i=0,l=a.length;i<l;i++)this._registerComponent(a[i]);else if(a&&typeof a==="object")this._registerComponent(a)}};Sys.UI.TemplateContext.registerClass("Sys.UI.TemplateContext",null,Sys.IDisposable);Sys.UI.TemplateContext._tcindex=0;Sys.UI.ITemplateContextConsumer=function(){};Sys.UI.ITemplateContextConsumer.prototype={get_templateContext:function(){},set_templateContext:function(){}};Sys.UI.ITemplateContextConsumer.registerInterface("Sys.UI.ITemplateContextConsumer");Sys.BindingMode=function(){};Sys.BindingMode.prototype={auto:0,oneTime:1,oneWay:2,twoWay:3,oneWayToSource:4};Sys.BindingMode.registerEnum("Sys.BindingMode");Sys.Binding=function(){Sys.Binding.initializeBase(this)};Sys.Binding.prototype={_convert:null,_convertBack:null,_convertFn:null,_convertBackFn:null,_handlers:null,_ignoreErrors:false,_mode:Sys.BindingMode.auto,_path:null,_targetProperty:null,_source:null,_target:null,_updateSource:false,_updateTarget:false,_defaultValue:null,_initializing:false,_templateContext:null,get_convert:function(){return this._convert||null},set_convert:function(a){this._convert=a;this._convertFn=this._resolveFunction(a)},get_convertBack:function(){return this._convertBack||null},set_convertBack:function(a){this._convertBack=a;this._convertBackFn=this._resolveFunction(a)},get_ignoreErrors:function(){return this._ignoreErrors},set_ignoreErrors:function(a){this._ignoreErrors=a},get_mode:function(){return this._mode||Sys.BindingMode.auto},set_mode:function(a){this._mode=a},get_defaultValue:function(){return this._defaultValue},set_defaultValue:function(a){this._defaultValue=a},get_source:function(){return this._source||null},set_source:function(a){this._source=a},get_templateContext:function(){return this._templateContext||null},set_templateContext:function(a){this._templateContext=a},get_path:function(){return this._path||""},set_path:function(a){this._path=a;this._pathArray=a?a.split("."):null},get_target:function(){return this._target||null},set_target:function(a){this._target=a},get_targetProperty:function(){return this._targetProperty||""},set_targetProperty:function(a){this._targetProperty=a;this._targetPropertyArray=a?a.split("."):null},_addBinding:function(a){if(a.nodeType===3){a=a.parentNode;if(!a)return}var b=a._msajaxBindings;if(!b)a._msajaxBindings=[this];else b.push(this);if(typeof a.dispose!=="function")a.dispose=Sys.Binding._disposeBindings},_disposeHandlers:function(){var d="propertyChanged";for(var c=0,e=this._handlers.length;c<e;c++){var a=this._handlers[c],b=a[2];switch(a[0]){case "click":case "keyup":case "change":Sys.UI.DomEvent._removeHandler(b,a[0],a[1]);break;case "optionsChanged":Sys.Observer._removeEventHandler(b,a[0],a[1]);break;case d:if(b.remove_propertyChanged)b.remove_propertyChanged(a[1]);else Sys.Observer._removeEventHandler(b,d,a[1]);break;case "disposing":b.remove_disposing(a[1])}}},dispose:function(){var b=null,a=this;a._disposed=true;if(a._handlers){a._disposeHandlers();delete a._handlers}a._convert=b;a._convertBack=b;a._convertFn=b;a._convertBackFn=b;a._lastSource=b;a._lastTarget=b;a._source=b;a._target=b;a._pathArray=b;a._defaultValue=b;a._targetPropertyArray=b;a._templateContext=b;Sys.Binding.callBaseMethod(a,"dispose")},_getDefaultMode:function(a){if(Sys.UI.DomElement.isDomElement(a)){if(a.nodeType===1){var b=a.tagName?a.tagName.toLowerCase():null;if(b==="input"||b==="select"||b==="textarea")return Sys.BindingMode.twoWay}}else if(Sys.INotifyPropertyChange.isImplementedBy(a))return Sys.BindingMode.twoWay;return Sys.BindingMode.oneWay},_getPropertyFromIndex:function(a,e,c,d){for(var b=c;b<=d;b++){if(a===null||typeof a==="undefined")return null;a=this._getPropertyData(a,e[b])}return a},_getPropertyData:function(b,a){if(typeof b["get_"+a]==="function")return b["get_"+a]();else return b[a]},_hookEvent:function(a,d,i){var f="click",g="select",e="propertyChanged",b=this,j;if(Sys.UI.DomElement.isDomElement(a)){thisHandler=Function.createDelegate(b,d);Array.add(b._handlers,[e,thisHandler,a]);if(a.add_propertyChanged)a.add_propertyChanged(thisHandler);else Sys.Observer._addEventHandler(a,e,thisHandler);var c=a.tagName?a.tagName.toLowerCase():null;if(c==="input"||c===g||c==="textarea"){var h=a.type;if(c==="input"&&h&&(h.toLowerCase()==="checkbox"||h.toLowerCase()==="radio")){thisHandler=Function.createDelegate(b,d);Array.add(b._handlers,[f,thisHandler,a]);Sys.UI.DomEvent.addHandler(a,f,thisHandler)}if(c===g){thisHandler=Function.createDelegate(b,d);Array.add(b._handlers,[f,thisHandler,a]);Sys.UI.DomEvent.addHandler(a,f,thisHandler)}if(c===g){thisHandler=Function.createDelegate(b,d);Array.add(b._handlers,["keyup",thisHandler,a]);Sys.UI.DomEvent.addHandler(a,"keyup",thisHandler)}thisHandler=Function.createDelegate(b,d);Array.add(b._handlers,["change",thisHandler,a]);Sys.UI.DomEvent.addHandler(a,"change",thisHandler);b._addBinding(a)}}else{thisHandler=Function.createDelegate(b,i);Array.add(b._handlers,[e,thisHandler,a]);if(a.add_propertyChanged)a.add_propertyChanged(thisHandler);else Sys.Observer._addEventHandler(a,e,thisHandler);if(Sys.INotifyDisposing.isImplementedBy(a)){thisHandler=Function.createDelegate(b,b._onDisposing);Array.add(b._handlers,["disposing",thisHandler,a]);a.add_disposing(thisHandler)}}},_onDisposing:function(){this.dispose()},_resolveFunction:function(a){var c,b;if(typeof a==="function")b=a;else{b=Sys.Binding.converters[a];if(!b)try{b=Type.parse(a)}catch(c){throw Error.invalidOperation(String.format(Sys.UI.TemplatesRes.functionNotFound,a))}}return b},update:function(a){a=a||this.get_mode();if(a===Sys.BindingMode.oneWayToSource)this._onTargetPropertyChanged(true);else this._onSourcePropertyChanged(true)},initialize:function(){var a=this;if(a.get_isInitialized())return;Sys.Binding.callBaseMethod(a,"initialize");var d=a.get_templateContext(),b=a.get_source(),c=a.get_target();if(typeof b==="string"){b=a._resolveReference(b);if(b)a.set_source(b)}if(typeof c==="string"){c=a._resolveReference(c);if(c)a.set_target(c)}a._initializing=true;if((!b||!c)&&d){var f=Function.createDelegate(a,a._doInitialize),e=d.__completedCallbacks;if(!e)d.__completedCallbacks=[f];else Array.add(e,f)}else a._doInitialize(true,b,c)},_isChecked:function(a,b){return b==="checked"&&a.tagName.toLowerCase()==="input"},_doInitialize:function(e,c,b){var a=this;c=e?c:a.get_source();if(!e&&c&&typeof c==="string"){var f=a._resolveReference(c,"source");if(f){c=f;a._initializing=false;a.set_source(f);a._initializing=true}}b=e?b:a.get_target();if(!e&&b&&typeof b==="string"){var h=a._resolveReference(b,"target");if(h){b=h;a._initializing=false;a.set_target(b);a._initializing=true}}var d=a.get_mode();if(b&&d===Sys.BindingMode.auto)d=a._getDefaultMode(b);a.update(d);if(d!==Sys.BindingMode.oneTime){a._handlers=[];if(c)if(d!==Sys.BindingMode.oneWayToSource)a._hookEvent(c,a._onSourcePropertyChanged,a._onComponentSourceChanged);else if(Sys.UI.DomElement.isDomElement(c))a._addBinding(c);if(b)if(d!==Sys.BindingMode.oneWay)a._hookEvent(b,a._onTargetPropertyChanged,a._onComponentTargetChanged);else if(Sys.UI.DomElement.isDomElement(b))a._addBinding(b)}var g=a;function i(b,d){var a="optionsChanged";if(Sys.UI.DomElement.isDomElement(b)&&/select/i.test(b.tagName)&&/selectedIndex|value/.test(d)){var c=Function.createDelegate(g,g._optionsUpdated);Sys.Observer.addEventHandler(b,a,c);g._handlers.push([a,c,b])}}if(c&&d>=3)i(c,a.get_path());if(b&&d<=3)i(b,a.get_targetProperty())},_optionsUpdated:function(a){if(!this._disposed)this.update(a===this.get_source()?4:2)},_onComponentSourceChanged:function(d,c){var a=this;if(a._disposed)return;var b=c.get_propertyName();if(b===""||!a._pathArray||b===a._pathArray[0])a._onSourcePropertyChanged()},_onComponentTargetChanged:function(c,b){if(this._disposed)return;var a=b.get_propertyName();if(a===""||a===this._targetPropertyArray[0])this._onTargetPropertyChanged()},_onSourcePropertyChanged:function(j){var f="undefined",a=this;if(a._disposed)return;var c=a.get_target(),b=a.get_source();if(!c)return;b=b&&a._pathArray?a._getPropertyFromIndex(b,a._pathArray,0,a._pathArray.length-1):b;if(!a._updateSource&&(j||b!==a._lastSource))try{a._updateTarget=true;a._lastSource=a._lastTarget=b;if(a._convertFn)if(a._ignoreErrors)try{b=a._convertFn(b,a)}catch(k){}else b=a._convertFn(b,a);if(b===null||typeof b===f)b=a.get_defaultValue();if(a._targetProperty&&a._targetProperty.startsWith("class:")){var g=a._targetProperty.substr(6).trim();b?Sys.UI.DomElement.addCssClass(c,g):Sys.UI.DomElement.removeCssClass(c,g)}else{var e=a._targetPropertyArray.length;c=a._getPropertyFromIndex(c,a._targetPropertyArray,0,e-2);if(c!==null&&typeof c!==f){var d=a._targetPropertyArray[e-1],h=Sys.UI.DomElement.isDomElement(c);if(h){b=Sys.UI.Template._checkAttribute(d,b);if(d==="innerHTML")Sys.Application._clearContent(c)}Sys.Observer._setValue(c,d,b);if(b&&h&&a._isChecked(c,d)){var i=document.createAttribute(d);i.nodeValue=d;c.setAttributeNode(i)}}}}finally{a._updateTarget=false}},_onTargetPropertyChanged:function(h){var a=this;if(a._disposed)return;var b=a.get_target(),c=a.get_source();if(!c)return;b=!b?null:a._getPropertyFromIndex(b,a._targetPropertyArray,0,a._targetPropertyArray.length-1);if(!a._updateTarget&&(h||b!==a._lastTarget))try{a._updateSource=true;a._lastTarget=a._lastSource=b;if(a._convertBackFn)if(a._ignoreErrors)try{b=a._convertBackFn(b,a)}catch(i){}else b=a._convertBackFn(b,a);if(a._pathArray){var e=a._pathArray.length,c=a._getPropertyFromIndex(a.get_source(),a._pathArray,0,e-2);if(c!==null&&typeof c!=="undefined"){var d=a._pathArray[e-1],f=Sys.UI.DomElement.isDomElement(c);if(f){b=Sys.UI.Template._checkAttribute(d,b);if(d==="innerHTML")Sys.Application._clearContent(c)}Sys.Observer._setValue(c,d,b);if(b&&f&&a._isChecked(c,d)){var g=document.createAttribute(d);g.nodeValue=d;c.setAttributeNode(g)}}}}finally{a._updateSource=false}},_resolveReference:function(f){var e="undefined",d=this.get_templateContext(),b=f.split("."),c=b[0],a=d&&d.getObjectByKey(c)||Sys.Application.findComponent(c)||(d||Sys.UI.DomElement).getElementById(c);if(a===null||typeof a===e)return null;if(b.length>1){a=this._getPropertyFromIndex(a,b,1,b.length-1);if(a===null||typeof a===e);}return a}};Sys.Binding._disposeBindings=function(){var a=this,b=a._msajaxBindings;if(b)for(var c=0,d=b.length;c<d;c++)b[c].dispose();a._msajaxBindings=null;if(a.control&&typeof a.control.dispose==="function")a.control.dispose();if(a.dispose===Sys.Binding._disposeBindings)a.dispose=null};Sys.Binding.registerClass("Sys.Binding",Sys.Component,Sys.UI.ITemplateContextConsumer);Sys.Binding.converters={};Sys.Application.registerMarkupExtension("binding",function(i,h,d,e){var a=new Sys.Binding;a.set_source(d.dataItem);a.set_templateContext(d);a.set_target(i);a.set_targetProperty(h);for(var c in e)if(e.hasOwnProperty(c)){var b=e[c],f=typeof b==="string";switch(c){case "$default":a.set_path(b);break;case "mode":Sys.Observer.setValue(a,c,f?Sys.BindingMode.parse(b):b);break;case "ignoreErrors":Sys.Observer.setValue(a,c,f?Boolean.parse(b):b);break;default:Sys.Observer.setValue(a,c,b);var g=a["set_"+c];g?g.call(a,b):(a[c]=b)}}d.components.push(a);a.initialize()},false);Sys.Application.registerMarkupExtension("ref",function(i,h,d,e){var a=new Sys.Binding;a.set_source(d.dataItem);a.set_templateContext(d);a.set_target(i);a.set_targetProperty(h);a.set_mode(Sys.BindingMode.oneTime);for(var c in e)if(e.hasOwnProperty(c)){var b=e[c],f=typeof b==="string";switch(c){case "source":case "$default":if(f){var g=b.indexOf(".");if(g>=0){a.set_path(b.substr(g+1));a.set_source(b.substr(0,g))}else a.set_source(b)}else a.set_source(b);break;case "mode":Sys.Observer.setValue(a,c,f?Sys.BindingMode.parse(b):b);break;case "ignoreErrors":Sys.Observer.setValue(a,c,f?Boolean.parse(b):b);break;default:Sys.Observer.setValue(a,c,b)}}d.components.push(a);a.initialize()},false);Sys.UI.DataView=function(a){Sys.UI.DataView.initializeBase(this,[a])};Sys.UI.DataView.prototype={_autoFetch:false,_fetching:false,_changed:false,_data:null,_dataProvider:null,_wsp:null,_wspClass:null,_dirty:false,_stale:true,_dvTemplate:null,_eventType:0,_httpVerb:null,_initialSelectedIndex:-1,_fetchParameters:null,_parentContext:null,_placeholder:null,_query:null,_contexts:null,_selectedIndex:-1,_selectedItemClass:null,_template:null,_timeout:0,_request:null,add_command:function(a){this.get_events().addHandler("command",a)},remove_command:function(a){this.get_events().removeHandler("command",a)},add_rendering:function(a){this.get_events().addHandler("rendering",a)},remove_rendering:function(a){this.get_events().removeHandler("rendering",a)},add_rendered:function(a){this.get_events().addHandler("rendered",a)},remove_rendered:function(a){this.get_events().removeHandler("rendered",a)},add_itemRendered:function(a){this.get_events().addHandler("itemRendered",a)},remove_itemRendered:function(a){this.get_events().removeHandler("itemRendered",a)},add_itemRendering:function(a){this.get_events().addHandler("itemRendering",a)},remove_itemRendering:function(a){this.get_events().removeHandler("itemRendering",a)},add_fetchFailed:function(a){this.get_events().addHandler("fetchFailed",a)},remove_fetchFailed:function(a){this.get_events().removeHandler("fetchFailed",a)},add_fetchSucceeded:function(a){this.get_events().addHandler("fetchSucceeded",a)},remove_fetchSucceeded:function(a){this.get_events().removeHandler("fetchSucceeded",a)},get_viewData:function(){return this._viewData||null},get_data:function(){return this._data},set_data:function(a){if(!this._setData||this._data!==a)this._loadData(a)},get_dataProvider:function(){return this._provider||null},set_dataProvider:function(b){var a=this;a._dataProvider=a._wsp=a._wspClass=null;if(Sys.Data.IDataProvider.isImplementedBy(b))a._dataProvider=b;else if(Sys.Net.WebServiceProxy.isInstanceOfType(b))a._wsp=b;else if(Type.isClass(b)&&b.inheritsFrom(Sys.Net.WebServiceProxy)&&typeof b.get_path==="function")a._wspClass=b;a._provider=b;if(a.get_autoFetch()&&a._isActive()){if(b)a._doAutoFetch()}else a._stale=true},get_autoFetch:function(){return this._autoFetch},set_autoFetch:function(b){var a=this,c=a._autoFetch;if(typeof b==="string")b=Boolean.parse(b);a._autoFetch=b;if(a._isActive()&&a._stale&&!c&&b)a._doAutoFetch()},get_isFetching:function(){return this._fetching},get_httpVerb:function(){return this._httpVerb||"POST"},set_httpVerb:function(a){this._httpVerb=a},get_contexts:function(){return this._contexts},get_fetchParameters:function(){return this._fetchParameters},set_fetchParameters:function(b){var a=this;if(a._fetchParameters!==b){a._fetchParameters=b;if(a.get_autoFetch()&&a._isActive())a._doAutoFetch();else a._stale=true}},get_selectedData:function(){var a=this.get_selectedIndex();if(a>-1){var b=this.get_viewData();if(b instanceof Array&&a<b.length)return b[a]}return null},get_selectedIndex:function(){return this._selectedIndex},set_selectedIndex:function(b){var a=this;b=a._validateIndexInput(b);if(!a.get_isInitialized()||!a._setData)a._selectedIndex=b;else a._applySelectedIndex(b)},get_initialSelectedIndex:function(){return this._initialSelectedIndex},set_initialSelectedIndex:function(b){var a=this;b=a._validateIndexInput(b);if(b!==a.get_initialSelectedIndex()){a._initialSelectedIndex=b;a._raiseChanged("initialSelectedIndex")}},get_selectedItemClass:function(){return this._selectedItemClass||""},set_selectedItemClass:function(b){var a=this,d=a.get_selectedItemClass();if(b!==d){var c=a.get_selectedIndex();a._addRemoveCssClass(c,d,Sys.UI.DomElement.removeCssClass);a._addRemoveCssClass(c,b,Sys.UI.DomElement.addCssClass);a._selectedItemClass=b}},get_timeout:function(){return this._timeout},set_timeout:function(a){this._timeout=a},get_fetchOperation:function(){return this._query||""},set_fetchOperation:function(b){var a=this;if(a._query!==b){a._query=b;if(a.get_autoFetch()&&a._isActive()){if(b)a._doAutoFetch()}else a._stale=true}},get_itemPlaceholder:function(){return this._placeholder||null},set_itemPlaceholder:function(b){var a=this;if(a._placeholder!==b){a._placeholder=b;a._dirty=true;a._raiseChanged("itemPlaceholder")}},get_templateContext:function(){return this._parentContext||null},set_templateContext:function(b){var a=this;if(a._parentContext!==b){a._parentContext=b;a._dirty=true;a._raiseChanged("templateContext")}},get_itemTemplate:function(){return this._template||null},set_itemTemplate:function(b){var a=this;if(a._template!==b){a._template=b;a._dirty=true;if(a._dvTemplate){a._dvTemplate.dispose();a._dvTemplate=null}if(a._isActive()){a.raisePropertyChanged("itemTemplate");a.refresh()}else a._changed=true}},_applySelectedIndex:function(b,g){var a=this,d=a.get_selectedIndex();if(g||b!==d){var c=a.get_viewData();if(!(c instanceof Array))c=[c];var f=b<-1||b>=c.length;a._selectedIndex=b;a._currentData=b===-1||f?null:c[b];var e=a.get_selectedItemClass();a._addRemoveCssClass(d,e,Sys.UI.DomElement.removeCssClass);a._addRemoveCssClass(b,e,Sys.UI.DomElement.addCssClass);if(!a.get_isUpdating()){if(b!==d)a.raisePropertyChanged("selectedIndex")}else a._changed=true}if(!a.get_isUpdating())a._raiseSelectedData();else a._changed=true},_addRemoveCssClass:function(b,e,h){if(e&&b>-1){var c=this.get_contexts(),g=c?c.length:-1;if(g&&b<g){var a=c[b].nodes;if(a)for(var d=0,i=a.length;d<i;d++){var f=a[d];if(f.nodeType===1)h(f,e)}}}},_collectionChanged:function(n,l){var b=this,i=b._currentData,e=l.get_changes(),a=b.get_selectedIndex(),k=a;if(b._isActive()){b._changing=true;b.refresh()}else{b._dirty=true;return}var g=b.get_viewData();if(a!==-1&&a<g.length&&g[a]===i)return;for(var d=0,m=e.length;d<m;d++){var c=e[d];if(c.action===Sys.NotifyCollectionChangedAction.add){if(a>=c.newStartingIndex)a+=c.newItems.length}else{var f=c.oldStartingIndex,h=c.oldItems.length,j=f+h-1;if(a>j)a-=h;else if(a>=f){a=-1;break}}}if(a!==k)b.set_selectedIndex(a)},_elementContains:function(b,a,c){if(b===a)return !c;do{a=a.parentNode;if(a===b)return true}while(a);return false},_raiseChanged:function(a){if(this._isActive())this.raisePropertyChanged(a);else this._changed=true},_raiseFailed:function(a,c){var b=new Sys.Net.WebRequestEventArgs(a?a.get_executor():null,c);this.onFetchFailed(b);this._raiseEvent("fetchFailed",b)},_raiseSelectedData:function(){var a=this;if(a._lastData!==a._currentData){a._lastData=a._currentData;a.raisePropertyChanged("selectedData")}},_raiseSucceeded:function(a,c){var b=new Sys.Net.WebRequestEventArgs(a?a.get_executor():null,null,c);this.onFetchSucceeded(b);this._raiseEvent("fetchSucceeded",b)},_ensureTemplate:function(a){if(!Sys.UI.Template.isInstanceOfType(a)){a=Sys.UI.DomElement.resolveElement(a);if(a)return new Sys.UI.Template(a)}else return a;return null},_getTemplate:function(){var b=this;if(b._dvTemplate)return b._dvTemplate;var a=b.get_itemTemplate();if(!a){var c=b.get_element();if(Sys.UI.Template._isTemplate(c))b._dvTemplate=a=new Sys.UI.Template(c)}else if(!Sys.UI.Template.isInstanceOfType(a)){a=Sys.UI.DomElement.resolveElement(a);b._dvTemplate=a=new Sys.UI.Template(a)}return a},_loadData:function(b){var a=this;a._swapData(a._data,b);a._data=b;a._setData=true;a._stale=false;a._dirty=true;if(a._isActive()){a.refresh();a.raisePropertyChanged("data")}else a._changed=true},_resetSelectedIndex:function(){var a=this,d=a.get_viewData(),b=a.get_initialSelectedIndex(),c=a.get_selectedIndex();if(!(d instanceof Array)||b>=d.length){if(c!==-1){a.set_selectedIndex(-1);return}}else if(c!==b){a.set_selectedIndex(b);return}a._currentData=a.get_selectedData();a._raiseSelectedData()},_initializeResults:function(){for(var a=0,c=this._contexts.length;a<c;a++){var b=this._contexts[a];if(b)b.initializeComponents()}},_isActive:function(){return this.get_isInitialized()&&!this.get_isUpdating()},_raiseEvent:function(c,b){var a=this.get_events().getHandler(c);if(a)a(this,b)},_raiseCommand:function(a){this.onCommand(a);this._raiseEvent("command",a)},_raiseItem:function(b,a){this["onItem"+b](a);this._raiseEvent("item"+b,a)},abortFetch:function(){var a=this;if(a._request){a._request.get_executor().abort();a._request=null}if(a._fetching){a._fetching=false;a._raiseChanged("isFetching")}},onBubbleEvent:function(d,a){if(Sys.CommandEventArgs.isInstanceOfType(a)){this._raiseCommand(a);if(a.get_cancel())return true;else{var c=a.get_commandName();if(c&&c.toLowerCase()==="select"){var b=this._findContextIndex(d);if(b!==-1){this.set_selectedIndex(b);return true}}}}return false},onRendering:function(){},onFetchFailed:function(){},onFetchSucceeded:function(){},_doAutoFetch:function(){var a=this,b;try{if(a._dataProvider||a._provider){a.fetchData();a._stale=false}}catch(b){a._raiseFailed(null,null)}},_findContextIndex:function(h){var d=this._containers;if(h&&d){var e=this.get_contexts();if(e){var b=Sys.UI.DomElement.resolveElement(h);if(b){var a=b.parentNode,j=this.get_element(),f=-1;while(a&&(f=Sys._indexOf(d,a))<0&&a!==j){b=a;a=a.parentNode}if(f>-1){var i=d[f];for(var c=0,k=e.length;c<k;c++){var g=e[c];if(g.containerElement===i&&Sys._indexOf(g.nodes,b)>-1)return c}}}}}return -1},findContext:function(b){var a=this._findContextIndex(b);return a!==-1?this.get_contexts()[a]:null},_clearContainer:function(b,a){var d=a?a.__msajaxphcount:-1;if(d>-1&&a)a.__msajaxphcount=0;if(d<0){if(a)b.removeChild(a);Sys.Application.disposeElement(b,true);try{b.innerHTML=""}catch(j){var g;while(g=b.firstChild)b.removeChild(g)}if(a)b.appendChild(a)}else if(d>0){var c,i,h,e=b.childNodes;for(c=0,i=e.length;c<i;c++)if(e[c]===a)break;h=c-d;for(c=0;c<d;c++){var f=e[h];Sys.Application.disposeElement(f,false);b.removeChild(f)}}},_clearContainers:function(c){var f;for(var b=0,e=c.length;b<e;b++){var a=c[b],d=a?a.parentNode:this.get_element();this._clearContainer(d,a)}},_isAlone:function(b,f){var e=b.childNodes;if(e.length===1)return true;var a=b.firstChild,d=/\S/;while(a){if(a!==f){var c=a.nodeType;if(c===3){if(d.test(a.nodeValue))return false}else if(c!==8)return false}a=a.nextSibling}return true},refresh:function(){var v="Rendered",u="undefined",l=null,a=this;if(!a._setData)return;var A=a._changing;a._changing=false;var d=a.get_data(),f=new Sys.Data.DataEventArgs(d);f._itemTemplate=a._getTemplate();f._placeholder=Sys.UI.DomElement.resolveElement(a.get_itemPlaceholder());a.onRendering(f);a._raiseEvent("rendering",f);if(f.get_cancel())return;d=f.get_data();a._viewData=d;var q=a._ensureTemplate(f._itemTemplate);a._dirty=false;var D=Sys.UI.DomElement.resolveElement(f._placeholder),C=a.get_templateContext(),h=a.get_element(),j,n,g;if(a._placeholders)a._clearContainers(a._placeholders);var z=d,k;if(d===l||typeof d===u)k=0;else if(!(d instanceof Array)){z=[d];k=1}else k=d.length;function t(){if(!this._cleared){if(Sys.UI.Template._isTemplate(h)){var a=new Sys.UI.Template(h);a._ensureCompiled();a.dispose();Sys.UI.DomElement.removeCssClass(h,"sys-template")}this._clearContainer(h,l);h.__msajaxphcount=-1;this._cleared=true}}if(!k&&q&&q.get_element()===h)t.call(a);var b,w,o,c,p,i;a._placeholders=o=[];a._containers=p=[];a._contexts=new Array(k);for(var e=0;e<k;e++){var y=z[e];g=new Sys.UI.DataViewItemEventArgs(y);g._itemTemplate=q;g._placeholder=D;a._raiseItem("Rendering",g);n=a._ensureTemplate(g._itemTemplate);b=Sys.UI.DomElement.resolveElement(g._placeholder);b=b?b.__msajaxphoption||b:l;if(b!==w){c=b?b.parentNode:h;if(Sys._indexOf(o,b)<0){if(b){if(/option/i.test(b.tagName)&&/select/i.test(c.tagName)){var m=document.createElement("_hiddenPlaceholder");c.replaceChild(m,b);b.__msajaxphoption=m;m.appendChild(b);b=m}b.style.display="none";var B=b.__msajaxphcount;if(typeof B===u&&a._isAlone(c,b)){b.__msajaxphcount=-1;a._clearContainer(c,b)}}else t.call(a);o.push(b);if(Sys._indexOf(p,c)<0){p.push(c);if(/select/i.test(c.tagName)){i=i||[];i.push(c)}}}}w=b;j=l;if(n){j=n.instantiateIn(c,d,y,e,b,C);g._ctx=j;a._contexts[e]=j;a._raiseItem(v,g);if(b){var x=b.__msajaxphcount||0;if(x>-1)b.__msajaxphcount=x+j.nodes.length}}else{a._contexts[e]=j;a._raiseItem(v,g)}}if(i)for(e=0;e<i.length;e++)Sys.Observer.raiseEvent(i[e],"optionsChanged",Sys.EventArgs.Empty);if(!A)if(!a._rendered&&a.get_selectedIndex()>-1)a._applySelectedIndex(a.get_selectedIndex(),true);else a._resetSelectedIndex();a._rendered=true;var r=a.get_selectedItemClass();if(r){var s=a.get_selectedIndex();if(s!==-1)a._addRemoveCssClass(s,r,Sys.UI.DomElement.addCssClass)}a.raisePropertyChanged("viewData");a._raiseEvent("rendered",f);a._initializeResults()},_swapData:function(c,b){var a=this;if(c)switch(a._eventType){case 1:c.remove_collectionChanged(a._changedHandler);break;case 2:Sys.Observer.removeCollectionChanged(c,a._changedHandler)}a._eventType=0;if(b){if(!a._changedHandler)a._changedHandler=Function.createDelegate(a,a._collectionChanged);if(typeof b.add_collectionChanged==="function"){b.add_collectionChanged(a._changedHandler);a._eventType=1}else if(b instanceof Array){Sys.Observer.addCollectionChanged(b,a._changedHandler);a._eventType=2}}},_validateIndexInput:function(a){var b=typeof a;if(b==="string")a=parseInt(a);return a},dispose:function(){var a=this;if(a._placeholders&&!Sys.Application.get_isDisposing())a._clearContainers(a._placeholders);if(a._dvTemplate)a._dvTemplate.dispose();if(a.get_isFetching()){a.abortFetch();a._fetching=false}a._swapData(a._data,null);a._currentData=a._lastData=a._placeholders=a._containers=a._placeholder=a._contexts=a._parentContext=a._dvTemplate=a._request=a._dataProvider=a._wsp=a._wspClass=a._provider=a._data=a._fetchParameters=a._query=null;Sys.UI.DataView.callBaseMethod(a,"dispose")},initialize:function(){Sys.UI.DataView.callBaseMethod(this,"initialize");this.refresh();this.updated()},fetchData:function(s,t,n,o){var f="fetchData",e="isFetching",b=null,a=this;a._stale=false;var d,c=a;function h(a){c._loadData(a);c._fetching=false;c._request=b;c._raiseChanged(e);c._raiseSucceeded(d,a);if(s)s(a,o,f)}function k(a){c._fetching=false;c._request=b;c._raiseChanged(e);c._raiseFailed(d,a);if(t)t(a,o,f)}if(a._fetching)a.abortFetch();var u=a._dataProvider,m=a._wsp,r=a._wspClass,l=a.get_fetchOperation(),g=a.get_fetchParameters()||b,i=a.get_httpVerb()||"POST",j=a.get_timeout()||0;if(typeof n==="undefined")n=b;if(u)d=u.fetchData(l,g,n,i,h,k,j,o);else if(m){var p=m.get_path();if(!p){var q=Object.getType(m);if(q&&typeof q.get_path==="function")p=q.get_path()}d=Sys.UI.DataView._fetchWSP(b,p,l,g,i,h,k,j||m.get_timeout())}else if(r)d=Sys.UI.DataView._fetchWSP(b,r.get_path(),l,g,i,h,k,j||r.get_timeout());else d=Sys.UI.DataView._fetchWSP(b,a._provider,l,g,i,h,k,j);a._request=d;a._fetching=true;a._raiseChanged(e);return d},onCommand:function(){},onItemRendering:function(){},onItemRendered:function(){},updated:function(){var a=this;if(a._stale&&a.get_autoFetch())a._doAutoFetch();if(a._dirty)a.refresh();if(a._changed){a.raisePropertyChanged("");a._changed=false}}};Sys.UI.DataView.registerClass("Sys.UI.DataView",Sys.UI.Control,Sys.UI.ITemplateContextConsumer);Sys.UI.DataView._fetchWSP=function(i,h,d,c,e,a,b,g,f){return Sys.Net.WebServiceProxy.invoke(h,d,e==="GET",c,a,b,f,g)};Sys.UI.DataViewItemEventArgs=function(b,a){Sys.UI.DataViewItemEventArgs.initializeBase(this);this._ctx=a;this._data=b||null};Sys.UI.DataViewItemEventArgs.prototype={get_dataItem:function(){return this._data},get_itemContext:function(){return this._ctx||null},get_itemPlaceholder:function(){return this._placeholder||null},set_itemPlaceholder:function(a){this._placeholder=a},get_itemTemplate:function(){return this._itemTemplate||null},set_itemTemplate:function(a){this._itemTemplate=a}};Sys.UI.DataViewItemEventArgs.registerClass("Sys.UI.DataViewItemEventArgs",Sys.EventArgs);
Type.registerNamespace('Sys.UI');Sys.UI.TemplatesRes={'cannotFindMarkupExtension':'A markup extension with the name \'{0}\' could not be found.'};
